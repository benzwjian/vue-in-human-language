<!DOCTYPE html>
<html>
<head>
    <title>component</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport"
        content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
    
    <link rel="stylesheet"
        media="all"
        href="../../../assets/file_1.css"/>
    
    <link rel="stylesheet"
        media="all"
        href="../../../assets/file_5.css"/>
    
    <link rel="stylesheet"
        media="all"
        href="../../../assets/32px.png"/>
    
    <link rel="stylesheet"
        media="all"
        href="../../../assets/40px.png"/>
    
    <link rel="stylesheet"
        media="all"
        href="../../../assets/throbber.gif"/>
    
    <link rel="stylesheet"
        media="all"
        href="../../../assets/file_7.css"/>
    
    <link rel="stylesheet"
        media="all"
        href="../../../assets/file_8.css"/>
    

    
    <script src="../../../assets/file_2.js"
        type="text/javascript"></script>
    
    <script src="../../../assets/file_3.js"
        type="text/javascript"></script>
    
    <script src="../../../assets/file_4.js"
        type="text/javascript"></script>
    
    <script src="../../../assets/file_6.js"
        type="text/javascript"></script>
    

    <script type="application/json" id="jsTreeJSON">
        [{"id":"annotated-src/filters/array-filters.js","text":"array-filters.js","icon":"jstree-file","parent":"annotated-src/filters","a_attr":{"href":"../../filters/array-filters.js.html"},"state":{"selected":false}},{"id":"annotated-src","text":"annotated-src","icon":"jstree-folder","parent":"#","a_attr":{"href":"../.."},"state":{"opened":true}},{"id":"annotated-src/cache.js","text":"cache.js","icon":"jstree-file","parent":"annotated-src","a_attr":{"href":"../../cache.js.html"},"state":{"selected":false}},{"id":"annotated-src/compiler","text":"compiler","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"../../compiler"},"state":{"opened":false}},{"id":"annotated-src/compiler/compile-props.js","text":"compile-props.js","icon":"jstree-file","parent":"annotated-src/compiler","a_attr":{"href":"../../compiler/compile-props.js.html"},"state":{"selected":false}},{"id":"annotated-src/compiler/compile.js","text":"compile.js","icon":"jstree-file","parent":"annotated-src/compiler","a_attr":{"href":"../../compiler/compile.js.html"},"state":{"selected":false}},{"id":"annotated-src/compiler/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/compiler","a_attr":{"href":"../../compiler/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/compiler/resolve-slots.js","text":"resolve-slots.js","icon":"jstree-file","parent":"annotated-src/compiler","a_attr":{"href":"../../compiler/resolve-slots.js.html"},"state":{"selected":false}},{"id":"annotated-src/compiler/transclude.js","text":"transclude.js","icon":"jstree-file","parent":"annotated-src/compiler","a_attr":{"href":"../../compiler/transclude.js.html"},"state":{"selected":false}},{"id":"annotated-src/config.js","text":"config.js","icon":"jstree-file","parent":"annotated-src","a_attr":{"href":"../../config.js.html"},"state":{"selected":false}},{"id":"annotated-src/directive.js","text":"directive.js","icon":"jstree-file","parent":"annotated-src","a_attr":{"href":"../../directive.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives","text":"directives","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":".."},"state":{"opened":true}},{"id":"annotated-src/directives/element","text":"element","icon":"jstree-folder","parent":"annotated-src/directives","a_attr":{"href":"../element"},"state":{"opened":false}},{"id":"annotated-src/directives/element/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/directives/element","a_attr":{"href":"../element/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/element/partial.js","text":"partial.js","icon":"jstree-file","parent":"annotated-src/directives/element","a_attr":{"href":"../element/partial.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/element/slot.js","text":"slot.js","icon":"jstree-file","parent":"annotated-src/directives/element","a_attr":{"href":"../element/slot.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/internal","text":"internal","icon":"jstree-folder","parent":"annotated-src/directives","a_attr":{"href":"."},"state":{"opened":true}},{"id":"annotated-src/directives/internal/class.js","text":"class.js","icon":"jstree-file","parent":"annotated-src/directives/internal","a_attr":{"href":"class.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/internal/component.js","text":"component.js","icon":"jstree-file","parent":"annotated-src/directives/internal","a_attr":{"href":"component.js.html"},"state":{"selected":true}},{"id":"annotated-src/directives/internal/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/directives/internal","a_attr":{"href":"index.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/internal/prop.js","text":"prop.js","icon":"jstree-file","parent":"annotated-src/directives/internal","a_attr":{"href":"prop.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/internal/style.js","text":"style.js","icon":"jstree-file","parent":"annotated-src/directives/internal","a_attr":{"href":"style.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/internal/transition.js","text":"transition.js","icon":"jstree-file","parent":"annotated-src/directives/internal","a_attr":{"href":"transition.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/priorities.js","text":"priorities.js","icon":"jstree-file","parent":"annotated-src/directives","a_attr":{"href":"../priorities.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public","text":"public","icon":"jstree-folder","parent":"annotated-src/directives","a_attr":{"href":"../public"},"state":{"opened":false}},{"id":"annotated-src/directives/public/bind.js","text":"bind.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../public/bind.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/cloak.js","text":"cloak.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../public/cloak.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/el.js","text":"el.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../public/el.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/for.js","text":"for.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../public/for.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/html.js","text":"html.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../public/html.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/if.js","text":"if.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../public/if.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../public/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/model","text":"model","icon":"jstree-folder","parent":"annotated-src/directives/public","a_attr":{"href":"../public/model"},"state":{"opened":false}},{"id":"annotated-src/directives/public/model/checkbox.js","text":"checkbox.js","icon":"jstree-file","parent":"annotated-src/directives/public/model","a_attr":{"href":"../public/model/checkbox.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/model/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/directives/public/model","a_attr":{"href":"../public/model/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/model/radio.js","text":"radio.js","icon":"jstree-file","parent":"annotated-src/directives/public/model","a_attr":{"href":"../public/model/radio.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/model/select.js","text":"select.js","icon":"jstree-file","parent":"annotated-src/directives/public/model","a_attr":{"href":"../public/model/select.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/model/text.js","text":"text.js","icon":"jstree-file","parent":"annotated-src/directives/public/model","a_attr":{"href":"../public/model/text.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/on.js","text":"on.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../public/on.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/ref.js","text":"ref.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../public/ref.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/show.js","text":"show.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../public/show.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/text.js","text":"text.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../public/text.js.html"},"state":{"selected":false}},{"id":"annotated-src/filters","text":"filters","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"../../filters"},"state":{"opened":false}},{"id":"annotated-src/batcher.js","text":"batcher.js","icon":"jstree-file","parent":"annotated-src","a_attr":{"href":"../../batcher.js.html"},"state":{"selected":false}},{"id":"annotated-src/filters/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/filters","a_attr":{"href":"../../filters/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/fragment","text":"fragment","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"../../fragment"},"state":{"opened":false}},{"id":"annotated-src/fragment/factory.js","text":"factory.js","icon":"jstree-file","parent":"annotated-src/fragment","a_attr":{"href":"../../fragment/factory.js.html"},"state":{"selected":false}},{"id":"annotated-src/fragment/fragment.js","text":"fragment.js","icon":"jstree-file","parent":"annotated-src/fragment","a_attr":{"href":"../../fragment/fragment.js.html"},"state":{"selected":false}},{"id":"annotated-src/global-api.js","text":"global-api.js","icon":"jstree-file","parent":"annotated-src","a_attr":{"href":"../../global-api.js.html"},"state":{"selected":false}},{"id":"annotated-src/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src","a_attr":{"href":"../../index.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance","text":"instance","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"../../instance"},"state":{"opened":false}},{"id":"annotated-src/instance/api","text":"api","icon":"jstree-folder","parent":"annotated-src/instance","a_attr":{"href":"../../instance/api"},"state":{"opened":false}},{"id":"annotated-src/instance/api/data.js","text":"data.js","icon":"jstree-file","parent":"annotated-src/instance/api","a_attr":{"href":"../../instance/api/data.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/api/dom.js","text":"dom.js","icon":"jstree-file","parent":"annotated-src/instance/api","a_attr":{"href":"../../instance/api/dom.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/api/events.js","text":"events.js","icon":"jstree-file","parent":"annotated-src/instance/api","a_attr":{"href":"../../instance/api/events.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/api/lifecycle.js","text":"lifecycle.js","icon":"jstree-file","parent":"annotated-src/instance/api","a_attr":{"href":"../../instance/api/lifecycle.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/internal","text":"internal","icon":"jstree-folder","parent":"annotated-src/instance","a_attr":{"href":"../../instance/internal"},"state":{"opened":false}},{"id":"annotated-src/instance/internal/events.js","text":"events.js","icon":"jstree-file","parent":"annotated-src/instance/internal","a_attr":{"href":"../../instance/internal/events.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/internal/init.js","text":"init.js","icon":"jstree-file","parent":"annotated-src/instance/internal","a_attr":{"href":"../../instance/internal/init.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/internal/lifecycle.js","text":"lifecycle.js","icon":"jstree-file","parent":"annotated-src/instance/internal","a_attr":{"href":"../../instance/internal/lifecycle.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/internal/misc.js","text":"misc.js","icon":"jstree-file","parent":"annotated-src/instance/internal","a_attr":{"href":"../../instance/internal/misc.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/internal/state.js","text":"state.js","icon":"jstree-file","parent":"annotated-src/instance/internal","a_attr":{"href":"../../instance/internal/state.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/vue.js","text":"vue.js","icon":"jstree-file","parent":"annotated-src/instance","a_attr":{"href":"../../instance/vue.js.html"},"state":{"selected":false}},{"id":"annotated-src/observer","text":"observer","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"../../observer"},"state":{"opened":false}},{"id":"annotated-src/observer/array.js","text":"array.js","icon":"jstree-file","parent":"annotated-src/observer","a_attr":{"href":"../../observer/array.js.html"},"state":{"selected":false}},{"id":"annotated-src/observer/dep.js","text":"dep.js","icon":"jstree-file","parent":"annotated-src/observer","a_attr":{"href":"../../observer/dep.js.html"},"state":{"selected":false}},{"id":"annotated-src/observer/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/observer","a_attr":{"href":"../../observer/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/parsers","text":"parsers","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"../../parsers"},"state":{"opened":false}},{"id":"annotated-src/parsers/directive.js","text":"directive.js","icon":"jstree-file","parent":"annotated-src/parsers","a_attr":{"href":"../../parsers/directive.js.html"},"state":{"selected":false}},{"id":"annotated-src/parsers/expression.js","text":"expression.js","icon":"jstree-file","parent":"annotated-src/parsers","a_attr":{"href":"../../parsers/expression.js.html"},"state":{"selected":false}},{"id":"annotated-src/parsers/path.js","text":"path.js","icon":"jstree-file","parent":"annotated-src/parsers","a_attr":{"href":"../../parsers/path.js.html"},"state":{"selected":false}},{"id":"annotated-src/parsers/template.js","text":"template.js","icon":"jstree-file","parent":"annotated-src/parsers","a_attr":{"href":"../../parsers/template.js.html"},"state":{"selected":false}},{"id":"annotated-src/parsers/text.js","text":"text.js","icon":"jstree-file","parent":"annotated-src/parsers","a_attr":{"href":"../../parsers/text.js.html"},"state":{"selected":false}},{"id":"annotated-src/transition","text":"transition","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"../../transition"},"state":{"opened":false}},{"id":"annotated-src/transition/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/transition","a_attr":{"href":"../../transition/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/transition/queue.js","text":"queue.js","icon":"jstree-file","parent":"annotated-src/transition","a_attr":{"href":"../../transition/queue.js.html"},"state":{"selected":false}},{"id":"annotated-src/transition/transition.js","text":"transition.js","icon":"jstree-file","parent":"annotated-src/transition","a_attr":{"href":"../../transition/transition.js.html"},"state":{"selected":false}},{"id":"annotated-src/util","text":"util","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"../../util"},"state":{"opened":false}},{"id":"annotated-src/util/component.js","text":"component.js","icon":"jstree-file","parent":"annotated-src/util","a_attr":{"href":"../../util/component.js.html"},"state":{"selected":false}},{"id":"annotated-src/util/debug.js","text":"debug.js","icon":"jstree-file","parent":"annotated-src/util","a_attr":{"href":"../../util/debug.js.html"},"state":{"selected":false}},{"id":"annotated-src/util/dom.js","text":"dom.js","icon":"jstree-file","parent":"annotated-src/util","a_attr":{"href":"../../util/dom.js.html"},"state":{"selected":false}},{"id":"annotated-src/util/env.js","text":"env.js","icon":"jstree-file","parent":"annotated-src/util","a_attr":{"href":"../../util/env.js.html"},"state":{"selected":false}},{"id":"annotated-src/util/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/util","a_attr":{"href":"../../util/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/util/lang.js","text":"lang.js","icon":"jstree-file","parent":"annotated-src/util","a_attr":{"href":"../../util/lang.js.html"},"state":{"selected":false}},{"id":"annotated-src/util/options.js","text":"options.js","icon":"jstree-file","parent":"annotated-src/util","a_attr":{"href":"../../util/options.js.html"},"state":{"selected":false}},{"id":"annotated-src/watcher.js","text":"watcher.js","icon":"jstree-file","parent":"annotated-src","a_attr":{"href":"../../watcher.js.html"},"state":{"selected":false}}]
    </script>
</head>
<body class="markdown-body">
<h1>
    component
</h1>
<div class="subHeading">
    annotated-src/directives/internal/component.js
</div>
<button type="button" class="navigatorToggle">&#9776; files...</button>
<nav class="navigationTree minimized">
    <input type="text" id="jsTreeSearch" placeholder="search..."/>
    <div></div>
</nav>
<section>
    <ul class="sectionDetails codeOnly">
        
        
        <li id="section-1">
            <div class="annotation">
                
            </div><div class="content">
                <div class="highlight"><pre><span class="hljs-keyword">import</span> { cloneNode } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../parsers/template'</span>
<span class="hljs-keyword">import</span> { COMPONENT } <span class="hljs-keyword">from</span> <span class="hljs-string">'../priorities'</span>
<span class="hljs-keyword">import</span> {
  extractContent,
  createAnchor,
  replace,
  hyphenate,
  warn,
  cancellable,
  extend
} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../util/index'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {

  priority: COMPONENT,

  params: [
    <span class="hljs-string">'keep-alive'</span>,
    <span class="hljs-string">'transition-mode'</span>,
    <span class="hljs-string">'inline-template'</span>
  ],

  <span class="hljs-comment">/**
   * Setup. Two possible usages:
   *
   * - static:
   *   &lt;comp&gt; or &lt;div v-component="comp"&gt;
   *
   * - dynamic:
   *   &lt;component :is="view"&gt;
   */</span>

  bind () {
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.el.__vue__) {
      <span class="hljs-comment">/* keep-alive cache */</span>
      <span class="hljs-keyword">this</span>.keepAlive = <span class="hljs-keyword">this</span>.params.keepAlive
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.keepAlive) {
        <span class="hljs-keyword">this</span>.cache = {}
      }
      <span class="hljs-comment">/* check inline-template */</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.params.inlineTemplate) {
        <span class="hljs-comment">/* extract inline template as a DocumentFragment */</span>
        <span class="hljs-keyword">this</span>.inlineTemplate = extractContent(<span class="hljs-keyword">this</span>.el, <span class="hljs-literal">true</span>)
      }
      <span class="hljs-comment">/* component resolution related state */</span>
      <span class="hljs-keyword">this</span>.pendingComponentCb =
      <span class="hljs-keyword">this</span>.Component = <span class="hljs-literal">null</span>
      <span class="hljs-comment">/* transition related state */</span>
      <span class="hljs-keyword">this</span>.pendingRemovals = <span class="hljs-number">0</span>
      <span class="hljs-keyword">this</span>.pendingRemovalCb = <span class="hljs-literal">null</span>
      <span class="hljs-comment">/* create a ref anchor */</span>
      <span class="hljs-keyword">this</span>.anchor = createAnchor(<span class="hljs-string">'v-component'</span>)
      replace(<span class="hljs-keyword">this</span>.el, <span class="hljs-keyword">this</span>.anchor)
      <span class="hljs-comment">/* remove is attribute. */</span>
      <span class="hljs-comment">/* this is removed during compilation, but because compilation is */</span>
      <span class="hljs-comment">/* cached, when the component is used elsewhere this attribute */</span>
      <span class="hljs-comment">/* will remain at link time. */</span>
      <span class="hljs-keyword">this</span>.el.removeAttribute(<span class="hljs-string">'is'</span>)
      <span class="hljs-keyword">this</span>.el.removeAttribute(<span class="hljs-string">':is'</span>)
      <span class="hljs-comment">/* remove ref, same as above */</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.descriptor.ref) {
        <span class="hljs-keyword">this</span>.el.removeAttribute(<span class="hljs-string">'v-ref:'</span> + hyphenate(<span class="hljs-keyword">this</span>.descriptor.ref))
      }
      <span class="hljs-comment">/* if static, build right now. */</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.literal) {
        <span class="hljs-keyword">this</span>.setComponent(<span class="hljs-keyword">this</span>.expression)
      }
    } <span class="hljs-keyword">else</span> {
      process.env.NODE_ENV !== <span class="hljs-string">'production'</span> &amp;&amp; warn(
        <span class="hljs-string">'cannot mount component "'</span> + <span class="hljs-keyword">this</span>.expression + <span class="hljs-string">'" '</span> +
        <span class="hljs-string">'on already mounted element: '</span> + <span class="hljs-keyword">this</span>.el
      )
    }
  },

  <span class="hljs-comment">/**
   * Public update, called by the watcher in the dynamic
   * literal scenario, e.g. &lt;component :is="view"&gt;
   */</span>

  update (value) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.literal) {
      <span class="hljs-keyword">this</span>.setComponent(value)
    }
  },

  <span class="hljs-comment">/**
   * Switch dynamic components. May resolve the component
   * asynchronously, and perform transition based on
   * specified transition mode. Accepts a few additional
   * arguments specifically for vue-router.
   *
   * The callback is called when the full transition is
   * finished.
   *
   * @param {String} value
   * @param {Function} [cb]
   */</span>

  setComponent (value, cb) {
    <span class="hljs-keyword">this</span>.invalidatePending()
    <span class="hljs-keyword">if</span> (!value) {
      <span class="hljs-comment">/* just remove current */</span>
      <span class="hljs-keyword">this</span>.unbuild(<span class="hljs-literal">true</span>)
      <span class="hljs-keyword">this</span>.remove(<span class="hljs-keyword">this</span>.childVM, cb)
      <span class="hljs-keyword">this</span>.childVM = <span class="hljs-literal">null</span>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>
      <span class="hljs-keyword">this</span>.resolveComponent(value, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        self.mountComponent(cb)
      })
    }
  },

  <span class="hljs-comment">/**
   * Resolve the component constructor to use when creating
   * the child vm.
   *
   * @param {String|Function} value
   * @param {Function} cb
   */</span>

  resolveComponent (value, cb) {
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>
    <span class="hljs-keyword">this</span>.pendingComponentCb = cancellable(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">Component</span>) </span>{
      self.ComponentName =
        Component.options.name ||
        (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'string'</span> ? value : <span class="hljs-literal">null</span>)
      self.Component = Component
      cb()
    })
    <span class="hljs-keyword">this</span>.vm._resolveComponent(value, <span class="hljs-keyword">this</span>.pendingComponentCb)
  },

  <span class="hljs-comment">/**
   * Create a new instance using the current constructor and
   * replace the existing instance. This method doesn't care
   * whether the new component and the old one are actually
   * the same.
   *
   * @param {Function} [cb]
   */</span>

  mountComponent (cb) {
    <span class="hljs-comment">/* actual mount */</span>
    <span class="hljs-keyword">this</span>.unbuild(<span class="hljs-literal">true</span>)
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>
    <span class="hljs-keyword">var</span> activateHooks = <span class="hljs-keyword">this</span>.Component.options.activate
    <span class="hljs-keyword">var</span> cached = <span class="hljs-keyword">this</span>.getCached()
    <span class="hljs-keyword">var</span> newComponent = <span class="hljs-keyword">this</span>.build()
    <span class="hljs-keyword">if</span> (activateHooks &amp;&amp; !cached) {
      <span class="hljs-keyword">this</span>.waitingFor = newComponent
      callActivateHooks(activateHooks, newComponent, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (self.waitingFor !== newComponent) {
          <span class="hljs-keyword">return</span>
        }
        self.waitingFor = <span class="hljs-literal">null</span>
        self.transition(newComponent, cb)
      })
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">/* update ref for kept-alive component */</span>
      <span class="hljs-keyword">if</span> (cached) {
        newComponent._updateRef()
      }
      <span class="hljs-keyword">this</span>.transition(newComponent, cb)
    }
  },

  <span class="hljs-comment">/**
   * When the component changes or unbinds before an async
   * constructor is resolved, we need to invalidate its
   * pending callback.
   */</span>

  invalidatePending () {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.pendingComponentCb) {
      <span class="hljs-keyword">this</span>.pendingComponentCb.cancel()
      <span class="hljs-keyword">this</span>.pendingComponentCb = <span class="hljs-literal">null</span>
    }
  },

  <span class="hljs-comment">/**
   * Instantiate/insert a new child vm.
   * If keep alive and has cached instance, insert that
   * instance; otherwise build a new one and cache it.
   *
   * @param {Object} [extraOptions]
   * @return {Vue} - the created instance
   */</span>

  build (extraOptions) {
    <span class="hljs-keyword">var</span> cached = <span class="hljs-keyword">this</span>.getCached()
    <span class="hljs-keyword">if</span> (cached) {
      <span class="hljs-keyword">return</span> cached
    }
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.Component) {
      <span class="hljs-comment">/* default options */</span>
      <span class="hljs-keyword">var</span> options = {
        name: <span class="hljs-keyword">this</span>.ComponentName,
        el: cloneNode(<span class="hljs-keyword">this</span>.el),
        template: <span class="hljs-keyword">this</span>.inlineTemplate,
        <span class="hljs-comment">/* make sure to add the child with correct parent */</span>
        <span class="hljs-comment">/* if this is a transcluded component, its parent */</span>
        <span class="hljs-comment">/* should be the transclusion host. */</span>
        parent: <span class="hljs-keyword">this</span>._host || <span class="hljs-keyword">this</span>.vm,
        <span class="hljs-comment">/* if no inline-template, then the compiled */</span>
        <span class="hljs-comment">/* linker can be cached for better performance. */</span>
        _linkerCachable: !<span class="hljs-keyword">this</span>.inlineTemplate,
        _ref: <span class="hljs-keyword">this</span>.descriptor.ref,
        _asComponent: <span class="hljs-literal">true</span>,
        _isRouterView: <span class="hljs-keyword">this</span>._isRouterView,
        <span class="hljs-comment">/* if this is a transcluded component, context */</span>
        <span class="hljs-comment">/* will be the common parent vm of this instance */</span>
        <span class="hljs-comment">/* and its host. */</span>
        _context: <span class="hljs-keyword">this</span>.vm,
        <span class="hljs-comment">/* if this is inside an inline v-for, the scope */</span>
        <span class="hljs-comment">/* will be the intermediate scope created for this */</span>
        <span class="hljs-comment">/* repeat fragment. this is used for linking props */</span>
        <span class="hljs-comment">/* and container directives. */</span>
        _scope: <span class="hljs-keyword">this</span>._scope,
        <span class="hljs-comment">/* pass in the owner fragment of this component. */</span>
        <span class="hljs-comment">/* this is necessary so that the fragment can keep */</span>
        <span class="hljs-comment">/* track of its contained components in order to */</span>
        <span class="hljs-comment">/* call attach/detach hooks for them. */</span>
        _frag: <span class="hljs-keyword">this</span>._frag
      }
      <span class="hljs-comment">/* extra options */</span>
      <span class="hljs-comment">/* in 1.0.0 this is used by vue-router only */</span>
      <span class="hljs-comment">/* istanbul ignore if */</span>
      <span class="hljs-keyword">if</span> (extraOptions) {
        extend(options, extraOptions)
      }
      <span class="hljs-keyword">var</span> child = <span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.Component(options)
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.keepAlive) {
        <span class="hljs-keyword">this</span>.cache[<span class="hljs-keyword">this</span>.Component.cid] = child
      }
      <span class="hljs-comment">/* istanbul ignore if */</span>
      <span class="hljs-keyword">if</span> (process.env.NODE_ENV !== <span class="hljs-string">'production'</span> &amp;&amp;
          <span class="hljs-keyword">this</span>.el.hasAttribute(<span class="hljs-string">'transition'</span>) &amp;&amp;
          child._isFragment) {
        warn(
          <span class="hljs-string">'Transitions will not work on a fragment instance. '</span> +
          <span class="hljs-string">'Template: '</span> + child.$options.template,
          child
        )
      }
      <span class="hljs-keyword">return</span> child
    }
  },

  <span class="hljs-comment">/**
   * Try to get a cached instance of the current component.
   *
   * @return {Vue|undefined}
   */</span>

  getCached () {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.keepAlive &amp;&amp; <span class="hljs-keyword">this</span>.cache[<span class="hljs-keyword">this</span>.Component.cid]
  },

  <span class="hljs-comment">/**
   * Teardown the current child, but defers cleanup so
   * that we can separate the destroy and removal steps.
   *
   * @param {Boolean} defer
   */</span>

  unbuild (defer) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.waitingFor) {
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.keepAlive) {
        <span class="hljs-keyword">this</span>.waitingFor.$destroy()
      }
      <span class="hljs-keyword">this</span>.waitingFor = <span class="hljs-literal">null</span>
    }
    <span class="hljs-keyword">var</span> child = <span class="hljs-keyword">this</span>.childVM
    <span class="hljs-keyword">if</span> (!child || <span class="hljs-keyword">this</span>.keepAlive) {
      <span class="hljs-keyword">if</span> (child) {
        <span class="hljs-comment">/* remove ref */</span>
        child._inactive = <span class="hljs-literal">true</span>
        child._updateRef(<span class="hljs-literal">true</span>)
      }
      <span class="hljs-keyword">return</span>
    }
    <span class="hljs-comment">/* the sole purpose of `deferCleanup` is so that we can */</span>
    <span class="hljs-comment">/* "deactivate" the vm right now and perform DOM removal */</span>
    <span class="hljs-comment">/* later. */</span>
    child.$destroy(<span class="hljs-literal">false</span>, defer)
  },

  <span class="hljs-comment">/**
   * Remove current destroyed child and manually do
   * the cleanup after removal.
   *
   * @param {Function} cb
   */</span>

  remove (child, cb) {
    <span class="hljs-keyword">var</span> keepAlive = <span class="hljs-keyword">this</span>.keepAlive
    <span class="hljs-keyword">if</span> (child) {
      <span class="hljs-comment">/* we may have a component switch when a previous */</span>
      <span class="hljs-comment">/* component is still being transitioned out. */</span>
      <span class="hljs-comment">/* we want to trigger only one lastest insertion cb */</span>
      <span class="hljs-comment">/* when the existing transition finishes. (#1119) */</span>
      <span class="hljs-keyword">this</span>.pendingRemovals++
      <span class="hljs-keyword">this</span>.pendingRemovalCb = cb
      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>
      child.$remove(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        self.pendingRemovals--
        <span class="hljs-keyword">if</span> (!keepAlive) child._cleanup()
        <span class="hljs-keyword">if</span> (!self.pendingRemovals &amp;&amp; self.pendingRemovalCb) {
          self.pendingRemovalCb()
          self.pendingRemovalCb = <span class="hljs-literal">null</span>
        }
      })
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cb) {
      cb()
    }
  },

  <span class="hljs-comment">/**
   * Actually swap the components, depending on the
   * transition mode. Defaults to simultaneous.
   *
   * @param {Vue} target
   * @param {Function} [cb]
   */</span>

  transition (target, cb) {
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>
    <span class="hljs-keyword">var</span> current = <span class="hljs-keyword">this</span>.childVM
    <span class="hljs-comment">/* for devtool inspection */</span>
    <span class="hljs-keyword">if</span> (current) current._inactive = <span class="hljs-literal">true</span>
    target._inactive = <span class="hljs-literal">false</span>
    <span class="hljs-keyword">this</span>.childVM = target
    <span class="hljs-keyword">switch</span> (self.params.transitionMode) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'in-out'</span>:
        target.$before(self.anchor, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
          self.remove(current, cb)
        })
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'out-in'</span>:
        self.remove(current, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
          target.$before(self.anchor, cb)
        })
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">default</span>:
        self.remove(current)
        target.$before(self.anchor, cb)
    }
  },

  <span class="hljs-comment">/**
   * Unbind.
   */</span>

  unbind () {
    <span class="hljs-keyword">this</span>.invalidatePending()
    <span class="hljs-comment">/* Do not defer cleanup when unbinding */</span>
    <span class="hljs-keyword">this</span>.unbuild()
    <span class="hljs-comment">/* destroy all keep-alive cached instances */</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.cache) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.cache) {
        <span class="hljs-keyword">this</span>.cache[key].$destroy()
      }
      <span class="hljs-keyword">this</span>.cache = <span class="hljs-literal">null</span>
    }
  }
}

<span class="hljs-comment">/**
 * Call activate hooks in order (asynchronous)
 *
 * @param {Array} hooks
 * @param {Vue} vm
 * @param {Function} cb
 */</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callActivateHooks</span> (<span class="hljs-params">hooks, vm, cb</span>) </span>{
  <span class="hljs-keyword">var</span> total = hooks.length
  <span class="hljs-keyword">var</span> called = <span class="hljs-number">0</span>
  hooks[<span class="hljs-number">0</span>].call(vm, next)
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">next</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (++called &gt;= total) {
      cb()
    } <span class="hljs-keyword">else</span> {
      hooks[called].call(vm, next)
    }
  }
}</pre></div>
            </div>
        </li>
        
    </ul>
</section>
</body>
</html>
