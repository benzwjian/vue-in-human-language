<!DOCTYPE html>
<html>
<head>
    <title>expression</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport"
        content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
    
    <link rel="stylesheet"
        media="all"
        href="../../assets/file_1.css"/>
    
    <link rel="stylesheet"
        media="all"
        href="../../assets/file_5.css"/>
    
    <link rel="stylesheet"
        media="all"
        href="../../assets/32px.png"/>
    
    <link rel="stylesheet"
        media="all"
        href="../../assets/40px.png"/>
    
    <link rel="stylesheet"
        media="all"
        href="../../assets/throbber.gif"/>
    
    <link rel="stylesheet"
        media="all"
        href="../../assets/file_7.css"/>
    
    <link rel="stylesheet"
        media="all"
        href="../../assets/file_8.css"/>
    

    
    <script src="../../assets/file_2.js"
        type="text/javascript"></script>
    
    <script src="../../assets/file_3.js"
        type="text/javascript"></script>
    
    <script src="../../assets/file_4.js"
        type="text/javascript"></script>
    
    <script src="../../assets/file_6.js"
        type="text/javascript"></script>
    

    <script type="application/json" id="jsTreeJSON">
        [{"id":"annotated-src/filters/array-filters.js","text":"array-filters.js","icon":"jstree-file","parent":"annotated-src/filters","a_attr":{"href":"../filters/array-filters.js.html"},"state":{"selected":false}},{"id":"annotated-src","text":"annotated-src","icon":"jstree-folder","parent":"#","a_attr":{"href":".."},"state":{"opened":true}},{"id":"annotated-src/cache.js","text":"cache.js","icon":"jstree-file","parent":"annotated-src","a_attr":{"href":"../cache.js.html"},"state":{"selected":false}},{"id":"annotated-src/compiler","text":"compiler","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"../compiler"},"state":{"opened":false}},{"id":"annotated-src/compiler/compile-props.js","text":"compile-props.js","icon":"jstree-file","parent":"annotated-src/compiler","a_attr":{"href":"../compiler/compile-props.js.html"},"state":{"selected":false}},{"id":"annotated-src/compiler/compile.js","text":"compile.js","icon":"jstree-file","parent":"annotated-src/compiler","a_attr":{"href":"../compiler/compile.js.html"},"state":{"selected":false}},{"id":"annotated-src/compiler/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/compiler","a_attr":{"href":"../compiler/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/compiler/resolve-slots.js","text":"resolve-slots.js","icon":"jstree-file","parent":"annotated-src/compiler","a_attr":{"href":"../compiler/resolve-slots.js.html"},"state":{"selected":false}},{"id":"annotated-src/compiler/transclude.js","text":"transclude.js","icon":"jstree-file","parent":"annotated-src/compiler","a_attr":{"href":"../compiler/transclude.js.html"},"state":{"selected":false}},{"id":"annotated-src/config.js","text":"config.js","icon":"jstree-file","parent":"annotated-src","a_attr":{"href":"../config.js.html"},"state":{"selected":false}},{"id":"annotated-src/directive.js","text":"directive.js","icon":"jstree-file","parent":"annotated-src","a_attr":{"href":"../directive.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives","text":"directives","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"../directives"},"state":{"opened":false}},{"id":"annotated-src/directives/element","text":"element","icon":"jstree-folder","parent":"annotated-src/directives","a_attr":{"href":"../directives/element"},"state":{"opened":false}},{"id":"annotated-src/directives/element/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/directives/element","a_attr":{"href":"../directives/element/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/element/partial.js","text":"partial.js","icon":"jstree-file","parent":"annotated-src/directives/element","a_attr":{"href":"../directives/element/partial.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/element/slot.js","text":"slot.js","icon":"jstree-file","parent":"annotated-src/directives/element","a_attr":{"href":"../directives/element/slot.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/internal","text":"internal","icon":"jstree-folder","parent":"annotated-src/directives","a_attr":{"href":"../directives/internal"},"state":{"opened":false}},{"id":"annotated-src/directives/internal/class.js","text":"class.js","icon":"jstree-file","parent":"annotated-src/directives/internal","a_attr":{"href":"../directives/internal/class.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/internal/component.js","text":"component.js","icon":"jstree-file","parent":"annotated-src/directives/internal","a_attr":{"href":"../directives/internal/component.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/internal/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/directives/internal","a_attr":{"href":"../directives/internal/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/internal/prop.js","text":"prop.js","icon":"jstree-file","parent":"annotated-src/directives/internal","a_attr":{"href":"../directives/internal/prop.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/internal/style.js","text":"style.js","icon":"jstree-file","parent":"annotated-src/directives/internal","a_attr":{"href":"../directives/internal/style.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/internal/transition.js","text":"transition.js","icon":"jstree-file","parent":"annotated-src/directives/internal","a_attr":{"href":"../directives/internal/transition.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/priorities.js","text":"priorities.js","icon":"jstree-file","parent":"annotated-src/directives","a_attr":{"href":"../directives/priorities.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public","text":"public","icon":"jstree-folder","parent":"annotated-src/directives","a_attr":{"href":"../directives/public"},"state":{"opened":false}},{"id":"annotated-src/directives/public/bind.js","text":"bind.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../directives/public/bind.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/cloak.js","text":"cloak.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../directives/public/cloak.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/el.js","text":"el.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../directives/public/el.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/for.js","text":"for.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../directives/public/for.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/html.js","text":"html.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../directives/public/html.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/if.js","text":"if.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../directives/public/if.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../directives/public/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/model","text":"model","icon":"jstree-folder","parent":"annotated-src/directives/public","a_attr":{"href":"../directives/public/model"},"state":{"opened":false}},{"id":"annotated-src/directives/public/model/checkbox.js","text":"checkbox.js","icon":"jstree-file","parent":"annotated-src/directives/public/model","a_attr":{"href":"../directives/public/model/checkbox.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/model/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/directives/public/model","a_attr":{"href":"../directives/public/model/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/model/radio.js","text":"radio.js","icon":"jstree-file","parent":"annotated-src/directives/public/model","a_attr":{"href":"../directives/public/model/radio.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/model/select.js","text":"select.js","icon":"jstree-file","parent":"annotated-src/directives/public/model","a_attr":{"href":"../directives/public/model/select.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/model/text.js","text":"text.js","icon":"jstree-file","parent":"annotated-src/directives/public/model","a_attr":{"href":"../directives/public/model/text.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/on.js","text":"on.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../directives/public/on.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/ref.js","text":"ref.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../directives/public/ref.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/show.js","text":"show.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../directives/public/show.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/text.js","text":"text.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../directives/public/text.js.html"},"state":{"selected":false}},{"id":"annotated-src/filters","text":"filters","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"../filters"},"state":{"opened":false}},{"id":"annotated-src/batcher.js","text":"batcher.js","icon":"jstree-file","parent":"annotated-src","a_attr":{"href":"../batcher.js.html"},"state":{"selected":false}},{"id":"annotated-src/filters/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/filters","a_attr":{"href":"../filters/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/fragment","text":"fragment","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"../fragment"},"state":{"opened":false}},{"id":"annotated-src/fragment/factory.js","text":"factory.js","icon":"jstree-file","parent":"annotated-src/fragment","a_attr":{"href":"../fragment/factory.js.html"},"state":{"selected":false}},{"id":"annotated-src/fragment/fragment.js","text":"fragment.js","icon":"jstree-file","parent":"annotated-src/fragment","a_attr":{"href":"../fragment/fragment.js.html"},"state":{"selected":false}},{"id":"annotated-src/global-api.js","text":"global-api.js","icon":"jstree-file","parent":"annotated-src","a_attr":{"href":"../global-api.js.html"},"state":{"selected":false}},{"id":"annotated-src/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src","a_attr":{"href":"../index.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance","text":"instance","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"../instance"},"state":{"opened":false}},{"id":"annotated-src/instance/api","text":"api","icon":"jstree-folder","parent":"annotated-src/instance","a_attr":{"href":"../instance/api"},"state":{"opened":false}},{"id":"annotated-src/instance/api/data.js","text":"data.js","icon":"jstree-file","parent":"annotated-src/instance/api","a_attr":{"href":"../instance/api/data.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/api/dom.js","text":"dom.js","icon":"jstree-file","parent":"annotated-src/instance/api","a_attr":{"href":"../instance/api/dom.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/api/events.js","text":"events.js","icon":"jstree-file","parent":"annotated-src/instance/api","a_attr":{"href":"../instance/api/events.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/api/lifecycle.js","text":"lifecycle.js","icon":"jstree-file","parent":"annotated-src/instance/api","a_attr":{"href":"../instance/api/lifecycle.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/internal","text":"internal","icon":"jstree-folder","parent":"annotated-src/instance","a_attr":{"href":"../instance/internal"},"state":{"opened":false}},{"id":"annotated-src/instance/internal/events.js","text":"events.js","icon":"jstree-file","parent":"annotated-src/instance/internal","a_attr":{"href":"../instance/internal/events.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/internal/init.js","text":"init.js","icon":"jstree-file","parent":"annotated-src/instance/internal","a_attr":{"href":"../instance/internal/init.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/internal/lifecycle.js","text":"lifecycle.js","icon":"jstree-file","parent":"annotated-src/instance/internal","a_attr":{"href":"../instance/internal/lifecycle.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/internal/misc.js","text":"misc.js","icon":"jstree-file","parent":"annotated-src/instance/internal","a_attr":{"href":"../instance/internal/misc.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/internal/state.js","text":"state.js","icon":"jstree-file","parent":"annotated-src/instance/internal","a_attr":{"href":"../instance/internal/state.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/vue.js","text":"vue.js","icon":"jstree-file","parent":"annotated-src/instance","a_attr":{"href":"../instance/vue.js.html"},"state":{"selected":false}},{"id":"annotated-src/observer","text":"observer","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"../observer"},"state":{"opened":false}},{"id":"annotated-src/observer/array.js","text":"array.js","icon":"jstree-file","parent":"annotated-src/observer","a_attr":{"href":"../observer/array.js.html"},"state":{"selected":false}},{"id":"annotated-src/observer/dep.js","text":"dep.js","icon":"jstree-file","parent":"annotated-src/observer","a_attr":{"href":"../observer/dep.js.html"},"state":{"selected":false}},{"id":"annotated-src/observer/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/observer","a_attr":{"href":"../observer/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/parsers","text":"parsers","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"."},"state":{"opened":true}},{"id":"annotated-src/parsers/directive.js","text":"directive.js","icon":"jstree-file","parent":"annotated-src/parsers","a_attr":{"href":"directive.js.html"},"state":{"selected":false}},{"id":"annotated-src/parsers/expression.js","text":"expression.js","icon":"jstree-file","parent":"annotated-src/parsers","a_attr":{"href":"expression.js.html"},"state":{"selected":true}},{"id":"annotated-src/parsers/path.js","text":"path.js","icon":"jstree-file","parent":"annotated-src/parsers","a_attr":{"href":"path.js.html"},"state":{"selected":false}},{"id":"annotated-src/parsers/template.js","text":"template.js","icon":"jstree-file","parent":"annotated-src/parsers","a_attr":{"href":"template.js.html"},"state":{"selected":false}},{"id":"annotated-src/parsers/text.js","text":"text.js","icon":"jstree-file","parent":"annotated-src/parsers","a_attr":{"href":"text.js.html"},"state":{"selected":false}},{"id":"annotated-src/transition","text":"transition","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"../transition"},"state":{"opened":false}},{"id":"annotated-src/transition/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/transition","a_attr":{"href":"../transition/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/transition/queue.js","text":"queue.js","icon":"jstree-file","parent":"annotated-src/transition","a_attr":{"href":"../transition/queue.js.html"},"state":{"selected":false}},{"id":"annotated-src/transition/transition.js","text":"transition.js","icon":"jstree-file","parent":"annotated-src/transition","a_attr":{"href":"../transition/transition.js.html"},"state":{"selected":false}},{"id":"annotated-src/util","text":"util","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"../util"},"state":{"opened":false}},{"id":"annotated-src/util/component.js","text":"component.js","icon":"jstree-file","parent":"annotated-src/util","a_attr":{"href":"../util/component.js.html"},"state":{"selected":false}},{"id":"annotated-src/util/debug.js","text":"debug.js","icon":"jstree-file","parent":"annotated-src/util","a_attr":{"href":"../util/debug.js.html"},"state":{"selected":false}},{"id":"annotated-src/util/dom.js","text":"dom.js","icon":"jstree-file","parent":"annotated-src/util","a_attr":{"href":"../util/dom.js.html"},"state":{"selected":false}},{"id":"annotated-src/util/env.js","text":"env.js","icon":"jstree-file","parent":"annotated-src/util","a_attr":{"href":"../util/env.js.html"},"state":{"selected":false}},{"id":"annotated-src/util/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/util","a_attr":{"href":"../util/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/util/lang.js","text":"lang.js","icon":"jstree-file","parent":"annotated-src/util","a_attr":{"href":"../util/lang.js.html"},"state":{"selected":false}},{"id":"annotated-src/util/options.js","text":"options.js","icon":"jstree-file","parent":"annotated-src/util","a_attr":{"href":"../util/options.js.html"},"state":{"selected":false}},{"id":"annotated-src/watcher.js","text":"watcher.js","icon":"jstree-file","parent":"annotated-src","a_attr":{"href":"../watcher.js.html"},"state":{"selected":false}}]
    </script>
</head>
<body class="markdown-body">
<h1>
    expression
</h1>
<div class="subHeading">
    annotated-src/parsers/expression.js
</div>
<button type="button" class="navigatorToggle">&#9776; files...</button>
<nav class="navigationTree minimized">
    <input type="text" id="jsTreeSearch" placeholder="search..."/>
    <div></div>
</nav>
<section>
    <ul class="sectionDetails codeOnly">
        
        
        <li id="section-1">
            <div class="annotation">
                
            </div><div class="content">
                <div class="highlight"><pre><span class="hljs-keyword">import</span> { warn } <span class="hljs-keyword">from</span> <span class="hljs-string">'../util/index'</span>
<span class="hljs-keyword">import</span> { parsePath, setPath } <span class="hljs-keyword">from</span> <span class="hljs-string">'./path'</span>
<span class="hljs-keyword">import</span> Cache <span class="hljs-keyword">from</span> <span class="hljs-string">'../cache'</span>

<span class="hljs-keyword">const</span> expressionCache = <span class="hljs-keyword">new</span> Cache(<span class="hljs-number">1000</span>)

<span class="hljs-keyword">const</span> allowedKeywords =
  <span class="hljs-string">'Math,Date,this,true,false,null,undefined,Infinity,NaN,'</span> +
  <span class="hljs-string">'isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,'</span> +
  <span class="hljs-string">'encodeURIComponent,parseInt,parseFloat'</span>
<span class="hljs-keyword">const</span> allowedKeywordsRE =
  <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'^('</span> + allowedKeywords.replace(<span class="hljs-regexp">/,/g</span>, <span class="hljs-string">'\\b|'</span>) + <span class="hljs-string">'\\b)'</span>)

<span class="hljs-comment">/* keywords that don't make sense inside expressions */</span>
<span class="hljs-keyword">const</span> improperKeywords =
  <span class="hljs-string">'break,case,class,catch,const,continue,debugger,default,'</span> +
  <span class="hljs-string">'delete,do,else,export,extends,finally,for,function,if,'</span> +
  <span class="hljs-string">'import,in,instanceof,let,return,super,switch,throw,try,'</span> +
  <span class="hljs-string">'var,while,with,yield,enum,await,implements,package,'</span> +
  <span class="hljs-string">'protected,static,interface,private,public'</span>
<span class="hljs-keyword">const</span> improperKeywordsRE =
  <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'^('</span> + improperKeywords.replace(<span class="hljs-regexp">/,/g</span>, <span class="hljs-string">'\\b|'</span>) + <span class="hljs-string">'\\b)'</span>)

<span class="hljs-keyword">const</span> wsRE = <span class="hljs-regexp">/\s/g</span>
<span class="hljs-keyword">const</span> newlineRE = <span class="hljs-regexp">/\n/g</span>
<span class="hljs-keyword">const</span> saveRE = <span class="hljs-regexp">/[\{,]\s*[\w\$_]+\s*:|('(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\"']|\\.)*`|`(?:[^`\\]|\\.)*`)|new |typeof |void /g</span>
<span class="hljs-keyword">const</span> restoreRE = <span class="hljs-regexp">/"(\d+)"/g</span>
<span class="hljs-keyword">const</span> pathTestRE = <span class="hljs-regexp">/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/</span>
<span class="hljs-keyword">const</span> identRE = <span class="hljs-regexp">/[^\w$\.](?:[A-Za-z_$][\w$]*)/g</span>
<span class="hljs-keyword">const</span> literalValueRE = <span class="hljs-regexp">/^(?:true|false|null|undefined|Infinity|NaN)$/</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">noop</span> (<span class="hljs-params"></span>) </span>{}

<span class="hljs-comment">/**
 * Save / Rewrite / Restore
 *
 * When rewriting paths found in an expression, it is
 * possible for the same letter sequences to be found in
 * strings and Object literal property keys. Therefore we
 * remove and store these parts in a temporary array, and
 * restore them after the path rewrite.
 */</span>

<span class="hljs-keyword">var</span> saved = []

<span class="hljs-comment">/**
 * Save replacer
 *
 * The save regex can match two possible cases:
 * 1. An opening object literal
 * 2. A string
 * If matched as a plain string, we need to escape its
 * newlines, since the string needs to be preserved when
 * generating the function body.
 *
 * @param {String} str
 * @param {String} isString - str if matched as a string
 * @return {String} - placeholder with index
 */</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">save</span> (<span class="hljs-params">str, isString</span>) </span>{
  <span class="hljs-keyword">var</span> i = saved.length
  saved[i] = isString
    ? str.replace(newlineRE, <span class="hljs-string">'\\n'</span>)
    : str
  <span class="hljs-keyword">return</span> <span class="hljs-string">'"'</span> + i + <span class="hljs-string">'"'</span>
}

<span class="hljs-comment">/**
 * Path rewrite replacer
 *
 * @param {String} raw
 * @return {String}
 */</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rewrite</span> (<span class="hljs-params">raw</span>) </span>{
  <span class="hljs-keyword">var</span> c = raw.charAt(<span class="hljs-number">0</span>)
  <span class="hljs-keyword">var</span> path = raw.slice(<span class="hljs-number">1</span>)
  <span class="hljs-keyword">if</span> (allowedKeywordsRE.test(path)) {
    <span class="hljs-keyword">return</span> raw
  } <span class="hljs-keyword">else</span> {
    path = path.indexOf(<span class="hljs-string">'"'</span>) &gt; <span class="hljs-number">-1</span>
      ? path.replace(restoreRE, restore)
      : path
    <span class="hljs-keyword">return</span> c + <span class="hljs-string">'scope.'</span> + path
  }
}

<span class="hljs-comment">/**
 * Restore replacer
 *
 * @param {String} str
 * @param {String} i - matched save index
 * @return {String}
 */</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">restore</span> (<span class="hljs-params">str, i</span>) </span>{
  <span class="hljs-keyword">return</span> saved[i]
}

<span class="hljs-comment">/**
 * Rewrite an expression, prefixing all path accessors with
 * `scope.` and generate getter/setter functions.
 *
 * @param {String} exp
 * @return {Function}
 */</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileGetter</span> (<span class="hljs-params">exp</span>) </span>{
  <span class="hljs-keyword">if</span> (improperKeywordsRE.test(exp)) {
    process.env.NODE_ENV !== <span class="hljs-string">'production'</span> &amp;&amp; warn(
      <span class="hljs-string">'Avoid using reserved keywords in expression: '</span> + exp
    )
  }
  <span class="hljs-comment">/* reset state */</span>
  saved.length = <span class="hljs-number">0</span>
  <span class="hljs-comment">/* save strings and object literal keys */</span>
  <span class="hljs-keyword">var</span> body = exp
    .replace(saveRE, save)
    .replace(wsRE, <span class="hljs-string">''</span>)
  <span class="hljs-comment">/* rewrite all paths */</span>
  <span class="hljs-comment">/* pad 1 space here because the regex matches 1 extra char */</span>
  body = (<span class="hljs-string">' '</span> + body)
    .replace(identRE, rewrite)
    .replace(restoreRE, restore)
  <span class="hljs-keyword">return</span> makeGetterFn(body)
}

<span class="hljs-comment">/**
 * Build a getter function. Requires eval.
 *
 * We isolate the try/catch so it doesn't affect the
 * optimization of the parse function when it is not called.
 *
 * @param {String} body
 * @return {Function|undefined}
 */</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeGetterFn</span> (<span class="hljs-params">body</span>) </span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">/* eslint-disable no-new-func */</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Function</span>(<span class="hljs-string">'scope'</span>, <span class="hljs-string">'return '</span> + body + <span class="hljs-string">';'</span>)
    <span class="hljs-comment">/* eslint-enable no-new-func */</span>
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-keyword">if</span> (process.env.NODE_ENV !== <span class="hljs-string">'production'</span>) {
      <span class="hljs-comment">/* istanbul ignore if */</span>
      <span class="hljs-keyword">if</span> (e.toString().match(<span class="hljs-regexp">/unsafe-eval|CSP/</span>)) {
        warn(
          <span class="hljs-string">'It seems you are using the default build of Vue.js in an environment '</span> +
          <span class="hljs-string">'with Content Security Policy that prohibits unsafe-eval. '</span> +
          <span class="hljs-string">'Use the CSP-compliant build instead: '</span> +
          <span class="hljs-string">'http://vuejs.org/guide/installation.html#CSP-compliant-build'</span>
        )
      } <span class="hljs-keyword">else</span> {
        warn(
          <span class="hljs-string">'Invalid expression. '</span> +
          <span class="hljs-string">'Generated function body: '</span> + body
        )
      }
    }
    <span class="hljs-keyword">return</span> noop
  }
}

<span class="hljs-comment">/**
 * Compile a setter function for the expression.
 *
 * @param {String} exp
 * @return {Function|undefined}
 */</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileSetter</span> (<span class="hljs-params">exp</span>) </span>{
  <span class="hljs-keyword">var</span> path = parsePath(exp)
  <span class="hljs-keyword">if</span> (path) {
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">scope, val</span>) </span>{
      setPath(scope, path, val)
    }
  } <span class="hljs-keyword">else</span> {
    process.env.NODE_ENV !== <span class="hljs-string">'production'</span> &amp;&amp; warn(
      <span class="hljs-string">'Invalid setter expression: '</span> + exp
    )
  }
}

<span class="hljs-comment">/**
 * Parse an expression into re-written getter/setters.
 *
 * @param {String} exp
 * @param {Boolean} needSet
 * @return {Function}
 */</span>

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseExpression</span> (<span class="hljs-params">exp, needSet</span>) </span>{
  exp = exp.trim()
  <span class="hljs-comment">/* try cache */</span>
  <span class="hljs-keyword">var</span> hit = expressionCache.get(exp)
  <span class="hljs-keyword">if</span> (hit) {
    <span class="hljs-keyword">if</span> (needSet &amp;&amp; !hit.set) {
      hit.set = compileSetter(hit.exp)
    }
    <span class="hljs-keyword">return</span> hit
  }
  <span class="hljs-keyword">var</span> res = { exp: exp }
  res.get = isSimplePath(exp) &amp;&amp; exp.indexOf(<span class="hljs-string">'['</span>) &lt; <span class="hljs-number">0</span>
    <span class="hljs-comment">/* optimized super simple getter */</span>
    ? makeGetterFn(<span class="hljs-string">'scope.'</span> + exp)
    <span class="hljs-comment">/* dynamic getter */</span>
    : compileGetter(exp)
  <span class="hljs-keyword">if</span> (needSet) {
    res.set = compileSetter(exp)
  }
  expressionCache.put(exp, res)
  <span class="hljs-keyword">return</span> res
}

<span class="hljs-comment">/**
 * Check if an expression is a simple path.
 *
 * @param {String} exp
 * @return {Boolean}
 */</span>

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isSimplePath</span> (<span class="hljs-params">exp</span>) </span>{
  <span class="hljs-keyword">return</span> pathTestRE.test(exp) &amp;&amp;
    <span class="hljs-comment">/* don't treat literal values as paths */</span>
    !literalValueRE.test(exp) &amp;&amp;
    <span class="hljs-comment">/* Math constants e.g. Math.PI, Math.E etc. */</span>
    exp.slice(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>) !== <span class="hljs-string">'Math.'</span>
}</pre></div>
            </div>
        </li>
        
    </ul>
</section>
</body>
</html>
