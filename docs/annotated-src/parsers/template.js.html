<!DOCTYPE html>
<html>
<head>
    <title>template</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport"
        content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
    
    <link rel="stylesheet"
        media="all"
        href="../../assets/file_1.css"/>
    
    <link rel="stylesheet"
        media="all"
        href="../../assets/file_5.css"/>
    
    <link rel="stylesheet"
        media="all"
        href="../../assets/32px.png"/>
    
    <link rel="stylesheet"
        media="all"
        href="../../assets/40px.png"/>
    
    <link rel="stylesheet"
        media="all"
        href="../../assets/throbber.gif"/>
    
    <link rel="stylesheet"
        media="all"
        href="../../assets/file_7.css"/>
    
    <link rel="stylesheet"
        media="all"
        href="../../assets/file_8.css"/>
    

    
    <script src="../../assets/file_2.js"
        type="text/javascript"></script>
    
    <script src="../../assets/file_3.js"
        type="text/javascript"></script>
    
    <script src="../../assets/file_4.js"
        type="text/javascript"></script>
    
    <script src="../../assets/file_6.js"
        type="text/javascript"></script>
    

    <script type="application/json" id="jsTreeJSON">
        [{"id":"annotated-src/filters/array-filters.js","text":"array-filters.js","icon":"jstree-file","parent":"annotated-src/filters","a_attr":{"href":"../filters/array-filters.js.html"},"state":{"selected":false}},{"id":"annotated-src","text":"annotated-src","icon":"jstree-folder","parent":"#","a_attr":{"href":".."},"state":{"opened":true}},{"id":"annotated-src/cache.js","text":"cache.js","icon":"jstree-file","parent":"annotated-src","a_attr":{"href":"../cache.js.html"},"state":{"selected":false}},{"id":"annotated-src/compiler","text":"compiler","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"../compiler"},"state":{"opened":false}},{"id":"annotated-src/compiler/compile-props.js","text":"compile-props.js","icon":"jstree-file","parent":"annotated-src/compiler","a_attr":{"href":"../compiler/compile-props.js.html"},"state":{"selected":false}},{"id":"annotated-src/compiler/compile.js","text":"compile.js","icon":"jstree-file","parent":"annotated-src/compiler","a_attr":{"href":"../compiler/compile.js.html"},"state":{"selected":false}},{"id":"annotated-src/compiler/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/compiler","a_attr":{"href":"../compiler/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/compiler/resolve-slots.js","text":"resolve-slots.js","icon":"jstree-file","parent":"annotated-src/compiler","a_attr":{"href":"../compiler/resolve-slots.js.html"},"state":{"selected":false}},{"id":"annotated-src/compiler/transclude.js","text":"transclude.js","icon":"jstree-file","parent":"annotated-src/compiler","a_attr":{"href":"../compiler/transclude.js.html"},"state":{"selected":false}},{"id":"annotated-src/config.js","text":"config.js","icon":"jstree-file","parent":"annotated-src","a_attr":{"href":"../config.js.html"},"state":{"selected":false}},{"id":"annotated-src/directive.js","text":"directive.js","icon":"jstree-file","parent":"annotated-src","a_attr":{"href":"../directive.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives","text":"directives","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"../directives"},"state":{"opened":false}},{"id":"annotated-src/directives/element","text":"element","icon":"jstree-folder","parent":"annotated-src/directives","a_attr":{"href":"../directives/element"},"state":{"opened":false}},{"id":"annotated-src/directives/element/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/directives/element","a_attr":{"href":"../directives/element/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/element/partial.js","text":"partial.js","icon":"jstree-file","parent":"annotated-src/directives/element","a_attr":{"href":"../directives/element/partial.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/element/slot.js","text":"slot.js","icon":"jstree-file","parent":"annotated-src/directives/element","a_attr":{"href":"../directives/element/slot.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/internal","text":"internal","icon":"jstree-folder","parent":"annotated-src/directives","a_attr":{"href":"../directives/internal"},"state":{"opened":false}},{"id":"annotated-src/directives/internal/class.js","text":"class.js","icon":"jstree-file","parent":"annotated-src/directives/internal","a_attr":{"href":"../directives/internal/class.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/internal/component.js","text":"component.js","icon":"jstree-file","parent":"annotated-src/directives/internal","a_attr":{"href":"../directives/internal/component.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/internal/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/directives/internal","a_attr":{"href":"../directives/internal/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/internal/prop.js","text":"prop.js","icon":"jstree-file","parent":"annotated-src/directives/internal","a_attr":{"href":"../directives/internal/prop.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/internal/style.js","text":"style.js","icon":"jstree-file","parent":"annotated-src/directives/internal","a_attr":{"href":"../directives/internal/style.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/internal/transition.js","text":"transition.js","icon":"jstree-file","parent":"annotated-src/directives/internal","a_attr":{"href":"../directives/internal/transition.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/priorities.js","text":"priorities.js","icon":"jstree-file","parent":"annotated-src/directives","a_attr":{"href":"../directives/priorities.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public","text":"public","icon":"jstree-folder","parent":"annotated-src/directives","a_attr":{"href":"../directives/public"},"state":{"opened":false}},{"id":"annotated-src/directives/public/bind.js","text":"bind.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../directives/public/bind.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/cloak.js","text":"cloak.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../directives/public/cloak.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/el.js","text":"el.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../directives/public/el.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/for.js","text":"for.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../directives/public/for.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/html.js","text":"html.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../directives/public/html.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/if.js","text":"if.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../directives/public/if.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../directives/public/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/model","text":"model","icon":"jstree-folder","parent":"annotated-src/directives/public","a_attr":{"href":"../directives/public/model"},"state":{"opened":false}},{"id":"annotated-src/directives/public/model/checkbox.js","text":"checkbox.js","icon":"jstree-file","parent":"annotated-src/directives/public/model","a_attr":{"href":"../directives/public/model/checkbox.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/model/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/directives/public/model","a_attr":{"href":"../directives/public/model/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/model/radio.js","text":"radio.js","icon":"jstree-file","parent":"annotated-src/directives/public/model","a_attr":{"href":"../directives/public/model/radio.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/model/select.js","text":"select.js","icon":"jstree-file","parent":"annotated-src/directives/public/model","a_attr":{"href":"../directives/public/model/select.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/model/text.js","text":"text.js","icon":"jstree-file","parent":"annotated-src/directives/public/model","a_attr":{"href":"../directives/public/model/text.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/on.js","text":"on.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../directives/public/on.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/ref.js","text":"ref.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../directives/public/ref.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/show.js","text":"show.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../directives/public/show.js.html"},"state":{"selected":false}},{"id":"annotated-src/directives/public/text.js","text":"text.js","icon":"jstree-file","parent":"annotated-src/directives/public","a_attr":{"href":"../directives/public/text.js.html"},"state":{"selected":false}},{"id":"annotated-src/filters","text":"filters","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"../filters"},"state":{"opened":false}},{"id":"annotated-src/batcher.js","text":"batcher.js","icon":"jstree-file","parent":"annotated-src","a_attr":{"href":"../batcher.js.html"},"state":{"selected":false}},{"id":"annotated-src/filters/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/filters","a_attr":{"href":"../filters/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/fragment","text":"fragment","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"../fragment"},"state":{"opened":false}},{"id":"annotated-src/fragment/factory.js","text":"factory.js","icon":"jstree-file","parent":"annotated-src/fragment","a_attr":{"href":"../fragment/factory.js.html"},"state":{"selected":false}},{"id":"annotated-src/fragment/fragment.js","text":"fragment.js","icon":"jstree-file","parent":"annotated-src/fragment","a_attr":{"href":"../fragment/fragment.js.html"},"state":{"selected":false}},{"id":"annotated-src/global-api.js","text":"global-api.js","icon":"jstree-file","parent":"annotated-src","a_attr":{"href":"../global-api.js.html"},"state":{"selected":false}},{"id":"annotated-src/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src","a_attr":{"href":"../index.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance","text":"instance","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"../instance"},"state":{"opened":false}},{"id":"annotated-src/instance/api","text":"api","icon":"jstree-folder","parent":"annotated-src/instance","a_attr":{"href":"../instance/api"},"state":{"opened":false}},{"id":"annotated-src/instance/api/data.js","text":"data.js","icon":"jstree-file","parent":"annotated-src/instance/api","a_attr":{"href":"../instance/api/data.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/api/dom.js","text":"dom.js","icon":"jstree-file","parent":"annotated-src/instance/api","a_attr":{"href":"../instance/api/dom.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/api/events.js","text":"events.js","icon":"jstree-file","parent":"annotated-src/instance/api","a_attr":{"href":"../instance/api/events.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/api/lifecycle.js","text":"lifecycle.js","icon":"jstree-file","parent":"annotated-src/instance/api","a_attr":{"href":"../instance/api/lifecycle.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/internal","text":"internal","icon":"jstree-folder","parent":"annotated-src/instance","a_attr":{"href":"../instance/internal"},"state":{"opened":false}},{"id":"annotated-src/instance/internal/events.js","text":"events.js","icon":"jstree-file","parent":"annotated-src/instance/internal","a_attr":{"href":"../instance/internal/events.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/internal/init.js","text":"init.js","icon":"jstree-file","parent":"annotated-src/instance/internal","a_attr":{"href":"../instance/internal/init.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/internal/lifecycle.js","text":"lifecycle.js","icon":"jstree-file","parent":"annotated-src/instance/internal","a_attr":{"href":"../instance/internal/lifecycle.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/internal/misc.js","text":"misc.js","icon":"jstree-file","parent":"annotated-src/instance/internal","a_attr":{"href":"../instance/internal/misc.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/internal/state.js","text":"state.js","icon":"jstree-file","parent":"annotated-src/instance/internal","a_attr":{"href":"../instance/internal/state.js.html"},"state":{"selected":false}},{"id":"annotated-src/instance/vue.js","text":"vue.js","icon":"jstree-file","parent":"annotated-src/instance","a_attr":{"href":"../instance/vue.js.html"},"state":{"selected":false}},{"id":"annotated-src/observer","text":"observer","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"../observer"},"state":{"opened":false}},{"id":"annotated-src/observer/array.js","text":"array.js","icon":"jstree-file","parent":"annotated-src/observer","a_attr":{"href":"../observer/array.js.html"},"state":{"selected":false}},{"id":"annotated-src/observer/dep.js","text":"dep.js","icon":"jstree-file","parent":"annotated-src/observer","a_attr":{"href":"../observer/dep.js.html"},"state":{"selected":false}},{"id":"annotated-src/observer/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/observer","a_attr":{"href":"../observer/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/parsers","text":"parsers","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"."},"state":{"opened":true}},{"id":"annotated-src/parsers/directive.js","text":"directive.js","icon":"jstree-file","parent":"annotated-src/parsers","a_attr":{"href":"directive.js.html"},"state":{"selected":false}},{"id":"annotated-src/parsers/expression.js","text":"expression.js","icon":"jstree-file","parent":"annotated-src/parsers","a_attr":{"href":"expression.js.html"},"state":{"selected":false}},{"id":"annotated-src/parsers/path.js","text":"path.js","icon":"jstree-file","parent":"annotated-src/parsers","a_attr":{"href":"path.js.html"},"state":{"selected":false}},{"id":"annotated-src/parsers/template.js","text":"template.js","icon":"jstree-file","parent":"annotated-src/parsers","a_attr":{"href":"template.js.html"},"state":{"selected":true}},{"id":"annotated-src/parsers/text.js","text":"text.js","icon":"jstree-file","parent":"annotated-src/parsers","a_attr":{"href":"text.js.html"},"state":{"selected":false}},{"id":"annotated-src/transition","text":"transition","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"../transition"},"state":{"opened":false}},{"id":"annotated-src/transition/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/transition","a_attr":{"href":"../transition/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/transition/queue.js","text":"queue.js","icon":"jstree-file","parent":"annotated-src/transition","a_attr":{"href":"../transition/queue.js.html"},"state":{"selected":false}},{"id":"annotated-src/transition/transition.js","text":"transition.js","icon":"jstree-file","parent":"annotated-src/transition","a_attr":{"href":"../transition/transition.js.html"},"state":{"selected":false}},{"id":"annotated-src/util","text":"util","icon":"jstree-folder","parent":"annotated-src","a_attr":{"href":"../util"},"state":{"opened":false}},{"id":"annotated-src/util/component.js","text":"component.js","icon":"jstree-file","parent":"annotated-src/util","a_attr":{"href":"../util/component.js.html"},"state":{"selected":false}},{"id":"annotated-src/util/debug.js","text":"debug.js","icon":"jstree-file","parent":"annotated-src/util","a_attr":{"href":"../util/debug.js.html"},"state":{"selected":false}},{"id":"annotated-src/util/dom.js","text":"dom.js","icon":"jstree-file","parent":"annotated-src/util","a_attr":{"href":"../util/dom.js.html"},"state":{"selected":false}},{"id":"annotated-src/util/env.js","text":"env.js","icon":"jstree-file","parent":"annotated-src/util","a_attr":{"href":"../util/env.js.html"},"state":{"selected":false}},{"id":"annotated-src/util/index.js","text":"index.js","icon":"jstree-file","parent":"annotated-src/util","a_attr":{"href":"../util/index.js.html"},"state":{"selected":false}},{"id":"annotated-src/util/lang.js","text":"lang.js","icon":"jstree-file","parent":"annotated-src/util","a_attr":{"href":"../util/lang.js.html"},"state":{"selected":false}},{"id":"annotated-src/util/options.js","text":"options.js","icon":"jstree-file","parent":"annotated-src/util","a_attr":{"href":"../util/options.js.html"},"state":{"selected":false}},{"id":"annotated-src/watcher.js","text":"watcher.js","icon":"jstree-file","parent":"annotated-src","a_attr":{"href":"../watcher.js.html"},"state":{"selected":false}}]
    </script>
</head>
<body class="markdown-body">
<h1>
    template
</h1>
<div class="subHeading">
    annotated-src/parsers/template.js
</div>
<button type="button" class="navigatorToggle">&#9776; files...</button>
<nav class="navigationTree minimized">
    <input type="text" id="jsTreeSearch" placeholder="search..."/>
    <div></div>
</nav>
<section>
    <ul class="sectionDetails codeOnly">
        
        
        <li id="section-1">
            <div class="annotation">
                
            </div><div class="content">
                <div class="highlight"><pre><span class="hljs-keyword">import</span> Cache <span class="hljs-keyword">from</span> <span class="hljs-string">'../cache'</span>
<span class="hljs-keyword">import</span> {
  inBrowser,
  trimNode,
  isTemplate,
  isFragment
} <span class="hljs-keyword">from</span> <span class="hljs-string">'../util/index'</span>

<span class="hljs-keyword">const</span> templateCache = <span class="hljs-keyword">new</span> Cache(<span class="hljs-number">1000</span>)
<span class="hljs-keyword">const</span> idSelectorCache = <span class="hljs-keyword">new</span> Cache(<span class="hljs-number">1000</span>)

<span class="hljs-keyword">const</span> map = {
  efault: [<span class="hljs-number">0</span>, <span class="hljs-string">''</span>, <span class="hljs-string">''</span>],
  legend: [<span class="hljs-number">1</span>, <span class="hljs-string">'&lt;fieldset&gt;'</span>, <span class="hljs-string">'&lt;/fieldset&gt;'</span>],
  tr: [<span class="hljs-number">2</span>, <span class="hljs-string">'&lt;table&gt;&lt;tbody&gt;'</span>, <span class="hljs-string">'&lt;/tbody&gt;&lt;/table&gt;'</span>],
  col: [
    <span class="hljs-number">2</span>,
    <span class="hljs-string">'&lt;table&gt;&lt;tbody&gt;&lt;/tbody&gt;&lt;colgroup&gt;'</span>,
    <span class="hljs-string">'&lt;/colgroup&gt;&lt;/table&gt;'</span>
  ]
}

map.td =
map.th = [
  <span class="hljs-number">3</span>,
  <span class="hljs-string">'&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;'</span>,
  <span class="hljs-string">'&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;'</span>
]

map.option =
map.optgroup = [
  <span class="hljs-number">1</span>,
  <span class="hljs-string">'&lt;select multiple="multiple"&gt;'</span>,
  <span class="hljs-string">'&lt;/select&gt;'</span>
]

map.thead =
map.tbody =
map.colgroup =
map.caption =
map.tfoot = [<span class="hljs-number">1</span>, <span class="hljs-string">'&lt;table&gt;'</span>, <span class="hljs-string">'&lt;/table&gt;'</span>]

map.g =
map.defs =
map.symbol =
map.use =
map.image =
map.text =
map.circle =
map.ellipse =
map.line =
map.path =
map.polygon =
map.polyline =
map.rect = [
  <span class="hljs-number">1</span>,
  <span class="hljs-string">'&lt;svg '</span> +
    <span class="hljs-string">'xmlns="http://www.w3.org/2000/svg" '</span> +
    <span class="hljs-string">'xmlns:xlink="http://www.w3.org/1999/xlink" '</span> +
    <span class="hljs-string">'xmlns:ev="http://www.w3.org/2001/xml-events"'</span> +
    <span class="hljs-string">'version="1.1"&gt;'</span>,
  <span class="hljs-string">'&lt;/svg&gt;'</span>
]

<span class="hljs-comment">/**
 * Check if a node is a supported template node with a
 * DocumentFragment content.
 *
 * @param {Node} node
 * @return {Boolean}
 */</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isRealTemplate</span> (<span class="hljs-params">node</span>) </span>{
  <span class="hljs-keyword">return</span> isTemplate(node) &amp;&amp; isFragment(node.content)
}

<span class="hljs-keyword">const</span> tagRE = <span class="hljs-regexp">/&lt;([\w:-]+)/</span>
<span class="hljs-keyword">const</span> entityRE = <span class="hljs-regexp">/&amp;#?\w+?;/</span>
<span class="hljs-keyword">const</span> commentRE = <span class="hljs-regexp">/&lt;!--/</span>

<span class="hljs-comment">/**
 * Convert a string template to a DocumentFragment.
 * Determines correct wrapping by tag types. Wrapping
 * strategy found in jQuery &amp; component/domify.
 *
 * @param {String} templateString
 * @param {Boolean} raw
 * @return {DocumentFragment}
 */</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stringToFragment</span> (<span class="hljs-params">templateString, raw</span>) </span>{
  <span class="hljs-comment">/* try a cache hit first */</span>
  <span class="hljs-keyword">var</span> cacheKey = raw
    ? templateString
    : templateString.trim()
  <span class="hljs-keyword">var</span> hit = templateCache.get(cacheKey)
  <span class="hljs-keyword">if</span> (hit) {
    <span class="hljs-keyword">return</span> hit
  }

  <span class="hljs-keyword">var</span> frag = <span class="hljs-built_in">document</span>.createDocumentFragment()
  <span class="hljs-keyword">var</span> tagMatch = templateString.match(tagRE)
  <span class="hljs-keyword">var</span> entityMatch = entityRE.test(templateString)
  <span class="hljs-keyword">var</span> commentMatch = commentRE.test(templateString)

  <span class="hljs-keyword">if</span> (!tagMatch &amp;&amp; !entityMatch &amp;&amp; !commentMatch) {
    <span class="hljs-comment">/* text only, return a single text node. */</span>
    frag.appendChild(
      <span class="hljs-built_in">document</span>.createTextNode(templateString)
    )
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">var</span> tag = tagMatch &amp;&amp; tagMatch[<span class="hljs-number">1</span>]
    <span class="hljs-keyword">var</span> wrap = map[tag] || map.efault
    <span class="hljs-keyword">var</span> depth = wrap[<span class="hljs-number">0</span>]
    <span class="hljs-keyword">var</span> prefix = wrap[<span class="hljs-number">1</span>]
    <span class="hljs-keyword">var</span> suffix = wrap[<span class="hljs-number">2</span>]
    <span class="hljs-keyword">var</span> node = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'div'</span>)

    node.innerHTML = prefix + templateString + suffix
    <span class="hljs-keyword">while</span> (depth--) {
      node = node.lastChild
    }

    <span class="hljs-keyword">var</span> child
    <span class="hljs-comment">/* eslint-disable no-cond-assign */</span>
    <span class="hljs-keyword">while</span> (child = node.firstChild) {
    <span class="hljs-comment">/* eslint-enable no-cond-assign */</span>
      frag.appendChild(child)
    }
  }
  <span class="hljs-keyword">if</span> (!raw) {
    trimNode(frag)
  }
  templateCache.put(cacheKey, frag)
  <span class="hljs-keyword">return</span> frag
}

<span class="hljs-comment">/**
 * Convert a template node to a DocumentFragment.
 *
 * @param {Node} node
 * @return {DocumentFragment}
 */</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">nodeToFragment</span> (<span class="hljs-params">node</span>) </span>{
  <span class="hljs-comment">/* if its a template tag and the browser supports it, */</span>
  <span class="hljs-comment">/* its content is already a document fragment. However, iOS Safari has */</span>
  <span class="hljs-comment">/* bug when using directly cloned template content with touch */</span>
  <span class="hljs-comment">/* events and can cause crashes when the nodes are removed from DOM, so we */</span>
  <span class="hljs-comment">/* have to treat template elements as string templates. (#2805) */</span>
  <span class="hljs-comment">/* istanbul ignore if */</span>
  <span class="hljs-keyword">if</span> (isRealTemplate(node)) {
    <span class="hljs-keyword">return</span> stringToFragment(node.innerHTML)
  }
  <span class="hljs-comment">/* script template */</span>
  <span class="hljs-keyword">if</span> (node.tagName === <span class="hljs-string">'SCRIPT'</span>) {
    <span class="hljs-keyword">return</span> stringToFragment(node.textContent)
  }
  <span class="hljs-comment">/* normal node, clone it to avoid mutating the original */</span>
  <span class="hljs-keyword">var</span> clonedNode = cloneNode(node)
  <span class="hljs-keyword">var</span> frag = <span class="hljs-built_in">document</span>.createDocumentFragment()
  <span class="hljs-keyword">var</span> child
  <span class="hljs-comment">/* eslint-disable no-cond-assign */</span>
  <span class="hljs-keyword">while</span> (child = clonedNode.firstChild) {
  <span class="hljs-comment">/* eslint-enable no-cond-assign */</span>
    frag.appendChild(child)
  }
  trimNode(frag)
  <span class="hljs-keyword">return</span> frag
}

<span class="hljs-comment">/* Test for the presence of the Safari template cloning bug */</span>
<span class="hljs-comment">/* https://bugs.webkit.org/showug.cgi?id=137755 */</span>
<span class="hljs-keyword">var</span> hasBrokenTemplate = (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-comment">/* istanbul ignore else */</span>
  <span class="hljs-keyword">if</span> (inBrowser) {
    <span class="hljs-keyword">var</span> a = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'div'</span>)
    a.innerHTML = <span class="hljs-string">'&lt;template&gt;1&lt;/template&gt;'</span>
    <span class="hljs-keyword">return</span> !a.cloneNode(<span class="hljs-literal">true</span>).firstChild.innerHTML
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }
})()

<span class="hljs-comment">/* Test for IE10/11 textarea placeholder clone bug */</span>
<span class="hljs-keyword">var</span> hasTextareaCloneBug = (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-comment">/* istanbul ignore else */</span>
  <span class="hljs-keyword">if</span> (inBrowser) {
    <span class="hljs-keyword">var</span> t = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'textarea'</span>)
    t.placeholder = <span class="hljs-string">'t'</span>
    <span class="hljs-keyword">return</span> t.cloneNode(<span class="hljs-literal">true</span>).value === <span class="hljs-string">'t'</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }
})()

<span class="hljs-comment">/**
 * 1. Deal with Safari cloning nested &lt;template&gt; bug by
 *    manually cloning all template instances.
 * 2. Deal with IE10/11 textarea placeholder bug by setting
 *    the correct value after cloning.
 *
 * @param {Element|DocumentFragment} node
 * @return {Element|DocumentFragment}
 */</span>

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cloneNode</span> (<span class="hljs-params">node</span>) </span>{
  <span class="hljs-comment">/* istanbul ignore if */</span>
  <span class="hljs-keyword">if</span> (!node.querySelectorAll) {
    <span class="hljs-keyword">return</span> node.cloneNode()
  }
  <span class="hljs-keyword">var</span> res = node.cloneNode(<span class="hljs-literal">true</span>)
  <span class="hljs-keyword">var</span> i, original, cloned
  <span class="hljs-comment">/* istanbul ignore if */</span>
  <span class="hljs-keyword">if</span> (hasBrokenTemplate) {
    <span class="hljs-keyword">var</span> tempClone = res
    <span class="hljs-keyword">if</span> (isRealTemplate(node)) {
      node = node.content
      tempClone = res.content
    }
    original = node.querySelectorAll(<span class="hljs-string">'template'</span>)
    <span class="hljs-keyword">if</span> (original.length) {
      cloned = tempClone.querySelectorAll(<span class="hljs-string">'template'</span>)
      i = cloned.length
      <span class="hljs-keyword">while</span> (i--) {
        cloned[i].parentNode.replaceChild(
          cloneNode(original[i]),
          cloned[i]
        )
      }
    }
  }
  <span class="hljs-comment">/* istanbul ignore if */</span>
  <span class="hljs-keyword">if</span> (hasTextareaCloneBug) {
    <span class="hljs-keyword">if</span> (node.tagName === <span class="hljs-string">'TEXTAREA'</span>) {
      res.value = node.value
    } <span class="hljs-keyword">else</span> {
      original = node.querySelectorAll(<span class="hljs-string">'textarea'</span>)
      <span class="hljs-keyword">if</span> (original.length) {
        cloned = res.querySelectorAll(<span class="hljs-string">'textarea'</span>)
        i = cloned.length
        <span class="hljs-keyword">while</span> (i--) {
          cloned[i].value = original[i].value
        }
      }
    }
  }
  <span class="hljs-keyword">return</span> res
}

<span class="hljs-comment">/**
 * Process the template option and normalizes it into a
 * a DocumentFragment that can be used as a partial or a
 * instance template.
 *
 * @param {*} template
 *        Possible values include:
 *        - DocumentFragment object
 *        - Node object of type Template
 *        - id selector: '#some-template-id'
 *        - template string: '&lt;div&gt;&lt;span&gt;{{msg}}&lt;/span&gt;&lt;/div&gt;'
 * @param {Boolean} shouldClone
 * @param {Boolean} raw
 *        inline HTML interpolation. Do not check for id
 *        selector and keep whitespace in the string.
 * @return {DocumentFragment|undefined}
 */</span>

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseTemplate</span> (<span class="hljs-params">template, shouldClone, raw</span>) </span>{
  <span class="hljs-keyword">var</span> node, frag

  <span class="hljs-comment">/* if the template is already a document fragment, */</span>
  <span class="hljs-comment">/* do nothing */</span>
  <span class="hljs-keyword">if</span> (isFragment(template)) {
    trimNode(template)
    <span class="hljs-keyword">return</span> shouldClone
      ? cloneNode(template)
      : template
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> template === <span class="hljs-string">'string'</span>) {
    <span class="hljs-comment">/* id selector */</span>
    <span class="hljs-keyword">if</span> (!raw &amp;&amp; template.charAt(<span class="hljs-number">0</span>) === <span class="hljs-string">'#'</span>) {
      <span class="hljs-comment">/* id selector can be cached too */</span>
      frag = idSelectorCache.get(template)
      <span class="hljs-keyword">if</span> (!frag) {
        node = <span class="hljs-built_in">document</span>.getElementById(template.slice(<span class="hljs-number">1</span>))
        <span class="hljs-keyword">if</span> (node) {
          frag = nodeToFragment(node)
          <span class="hljs-comment">/* save selector to cache */</span>
          idSelectorCache.put(template, frag)
        }
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">/* normal string template */</span>
      frag = stringToFragment(template, raw)
    }
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (template.nodeType) {
    <span class="hljs-comment">/* a direct node */</span>
    frag = nodeToFragment(template)
  }

  <span class="hljs-keyword">return</span> frag &amp;&amp; shouldClone
    ? cloneNode(frag)
    : frag
}</pre></div>
            </div>
        </li>
        
    </ul>
</section>
</body>
</html>
